---
author: "li_mingxie"
title: "【mysql】索引简介"
date:  2022-04-05T08:28:49+08:00
description: ""
tags: [
    "mysql",
    "index",
]
categories: [
    "mysql",
    "database",
    "index",
]
---

最近了查看了mysql索引，很多资料
  <!--more-->  

## 1.存储结构划分

按照数据存储的结构可以分B树索引和hash索引。

**B树索引**又称为 BTREE 索引，目前大部分的索引都是采用 B-树索引来存储的。B-树索引是一个典型的数据结构。
基于这种树形数据结构，表中的每一行都会在索引上有一个对应值。因此，在表中进行数据查询时，可以根据索引值一步一步定位到数据所在的行。
查询必须从索引的最左边的列开始。  
查询不能跳过某一索引列，必须按照从左到右的顺序进行匹配。  
存储引擎不能使用索引中范围条件右边的列。  
、
**哈希索引**也称为散列索引或 HASH 索引。MySQL 目前仅有 MEMORY 存储引擎和 HEAP 存储引擎支持这类索引。  
其中，MEMORY 存储引擎可以支持 B-树索引和 HASH 索引，且将 HASH 当成默认索引。
HASH 索引不是基于树形的数据结构查找数据，而是根据索引列对应的哈希值的方法获取表的记录行。  
不能使用 HASH 索引排序。
HASH 索引只支持等值比较，如“=”“IN()”或“<=>”。
HASH 索引不支持键的部分匹配，因为在计算 HASH 值的时候是通过整个索引值来计算的。

## 2.从表记录的排列顺序和索引的排列顺序是否一致来划分

先执行下面的语句，可以看看存储引擎的种类。(基于mysql5.7版本)  

按照存储的角度区分

1、聚集索引（clustered index）
聚集索引是按照所以把数据排好序了，所以一个表只能存在一个聚集索引，其它的都是非聚集索引。  
因这个特性，聚集索引是查询数据范围的时候有很大的性能优势。  
但是也需要注意的是如果频繁更新的列不适合设置为聚集索引，  
原因很简单，每次更新都需要从新排序，频繁的更新给的压力也大。  
如果不指定的话，默认主键为聚集索引。  

2、非聚集索引（non-clustered index）
一个表里除了一个聚集索引外其他的都是非聚集索引，虽然不能把数据按照索引排序，但是索引数据是可以排序的。
所以非聚集索引查询范围的时候是先找索引列的范围，再通过这个索引查询行的值。

## 3.从应用层次上来划分

单列索引：单列索引即一个索引只包含单个列。
组合索引：组合索引指在表的多个字段组合上创建的索引，只有在查询条件中使用了这些字段的左边字段时，索引才会被使用。使用组合索引时遵循最左前缀集合

## 4.主键

Primary Key（聚集索引）：InnoDB存储引擎的表会存在主键（唯一非null），如果建表的时候没有指定主键，则会使用第一非空的唯一索引作为聚集索引，否则InnoDB会自动帮你创建一个不可见的、长度为6字节的row_id用来作为聚集索引。

Key（普通索引）：是MySQL中的基本索引类型，允许在定义索引的列中插入重复值和空值

## 5.唯一索引

Unique（唯一索引）：索引列的值必须唯一，但允许有空值。若是组合索引，则列值的组合必须唯一。  
主键索引是一种特殊的唯一索引，不允许有空值。

## 6.全文索引

FULLTEXT（全文索引）：全文索引类型为FULLTEXT，在定义索引的列上支持值的全文查找，允许在这些索引列中插入重复值和空值。  
全文索引可以在CHAR、VARCHAR或者TEXT类型的列上创建。

## 空间索引
空间索引主要用于地理空间数据类型 GEOMETRY。


下面是[mysql官网给出的几个存储引擎和索引之间的关系](https://dev.mysql.com/doc/refman/8.0/en/create-index.html)。  
[图片地址](https://limingxie.github.io/images/database/mysql/mysql_index_1.png)  
![mysql_engine](https://mingxie-blog.oss-cn-beijing.aliyuncs.com/image/database/mysql/mysql_index_1.png)


----------------------------------------------
欢迎大家的意见和交流

`email: li_mingxie@163.com`
